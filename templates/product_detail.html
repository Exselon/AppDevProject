{% extends "base.html" %}
{% block title %} {{ product.name }} - Product Details {% endblock %}

{% block content %}

<div class="container productdt">
    <div class="row boxpadding">
        <div class="col-6 text-center"><img class="product-image" src="{{ url_for('static', filename='image/' + product.image_path) }}" alt="{{ product.name }}"></div>

        <div class="col-6 detail">

            <h3 class="pt-3">{{ product.name }}</h3>
            <h4 class="float-right"> ${{ product.price }}</h4><br><br>
            <p class="pb-5">{{ product.description }}</p>

            <div class="dropdown-divider pb-5"></div>
                <!-- Add more details as needed -->
                <!-- display the size options -->
                <form method="post" action="{{ url_for('add_to_cart', product_id=product.id) }}">

                    <div class="row pb-5">
                        <div class="col-4">
                            <label for="selected_size">Select Size:</label>
                            <select name="selected_size" id="size">
                                {% for size in sizes %}
                                    <option value="{{ size }}">{{ size }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="col-8">
                            <label for="quantity">Quantity:</label>
                            <button type="button" onclick="decrement()">-</button>
                            <input type="text" name="quantity" id="quantity" value="1" class="text-center" readonly>
                            <button type="button" onclick="increment()">+</button>
                        </div>
                    </div>

                {% if product.stock > 0 %}
                    <button type="submit"  class="form-control btn btn-primary rounded submit px-3">Add to Cart</button>
                {% else %}
                    <p>This product is currently out of stock.</p>
                {% endif %}
                </form>


        </div>

    </div>
</div>


<div class="container loginpg ">

			<div class="row justify-content-center">
				<div class="col-md-12 col-lg-10">
					<div class="wrap d-md-flex">

                    <div class="product-info">

                <p>{{ product.name }}</p>
                <p>Price: ${{ product.price }}</p>
                <p>Description: {{ product.description }}</p>

                <!-- Add more details as needed -->
                <!-- display the size options -->
                <form method="post" action="{{ url_for('add_to_cart', product_id=product.id) }}">
                    <label for="selected_size">Select Size:</label>
                    <select name="selected_size" id="size">
                        {% for size in sizes %}
                            <option value="{{ size }}">{{ size }}</option>
                        {% endfor %}
                    </select>

                    <label for="quantity">Quantity:</label>
                    <div>
                        <button type="button" onclick="decrement()">-</button>
                        <input type="text" name="quantity" id="quantity" value="1" readonly>
                        <button type="button" onclick="increment()">+</button>
                    </div>

                {% if product.stock > 0 %}
                    <button type="submit">Add to Cart</button>
                {% else %}
                    <p>This product is currently out of stock.</p>
                {% endif %}
                </form>
            </div>


					</div>
				</div>
			</div>
</div>

<div class="container-fluid product-details">
    <div class="row">
        <div class="col-5 text-center">
            <img class="product-image" src="{{ url_for('static', filename='image/' + product.image_path) }}" alt="{{ product.name }}">
        </div>
        <div class="col-7">
            <div class="product-info">
                <p>{{ product.name }}</p>
                <p>Price: ${{ product.price }}</p>
                <p>Description: {{ product.description }}</p>
                <p>Size: {{ product.size }}</p>
                <!-- Add more details as needed -->
                <!-- display the size options -->
                <form method="post" action="{{ url_for('add_to_cart', product_id=product.id) }}">
                    <label for="selected_size">Select Size:</label>
                    <select name="selected_size" id="size">
                        {% for size in sizes %}
                            <option value="{{ size }}">{{ size }}</option>
                        {% endfor %}
                    </select>

                    <label for="quantity">Quantity:</label>
                    <div>
                        <button type="button" onclick="decrement()">-</button>
                        <input type="text" name="quantity" id="quantity" value="1" readonly>
                        <button type="button" onclick="increment()">+</button>
                    </div>

                {% if product.stock > 0 %}
                    <button type="submit">Add to Cart</button>
                {% else %}
                    <p>This product is currently out of stock.</p>
                {% endif %}
                </form>
            </div>
        </div>
    </div>


<script>
        function increment() {
            var quantityInput = document.getElementById('quantity');
            var currentQuantity = parseInt(quantityInput.value, 10);
            var maxStock = {{ product.stock }};

            if (currentQuantity < maxStock) {
                quantityInput.value = currentQuantity + 1;
            }
        }

        function decrement() {
            var quantityInput = document.getElementById('quantity');
            var currentQuantity = parseInt(quantityInput.value, 10);

            if (currentQuantity > 1) {
                quantityInput.value = currentQuantity - 1;
            }
        }
    </script>

</div>



<div><p>testing detail</p>
<p>ID: {{ product.id }}</p>
<p>Price: ${{ product.price }}</p>
<p>Category: {{ product.category }}</p>
<p>Stock: {{ product.stock }}</p>
<p>Description: {{ product.description }}</p>
<p>Size: {{ product.size }}</p>
</div>

{% endblock %}